{{!-- This page handles blog comment page.  When the user clicks on a blog on home page, it is opened with a section to put new comment in. The old existing comments are shown above the comment text section. --}}

<div class="container-fluid d-flex justify-content-around">
    <div class="blog-box">
        <div class='welcome-div'>
            <h1>Read and Comment</h1>
        </div>
        <div class="'row">
            <div class="card" id="blog-card" label="{{blog.id}}">
                <div class="card-header d-flex justify-content-between">
                    <b>{{blog.title}}</b>
                    <span class="fs-6">-posted by {{blog.user.name}} on {{format_time blog.date_created}}</span>
                </div>
                <div class="card-body">
                    <p class="card-text">{{blog.content}}</p>
                    <a href="#" class="card-text"></a>
                </div>
            </div>
        </div>
        <br>
        <div  id="comment-section">
            {{#if hasComments}}
            {{#each comments as |comment|}}
            <div class="d-flex justify-content-center align-items-between">
                <p>{{comment.content}}</p>
                <p> <br> - by {{comment.user.name}} on {{format_time comment.date_created}}</p>
            </div>
            
            {{/each}}
            {{else}}
            <p>Please add your comment below.</p>
            {{/if}}
        </div>
        <div class="row">
            <div class='form-container'>
                <form id='comment-form'>
                    <div class='form-group'>
                        <label for='content'>Comment</label>
                        <textarea class='form-control' id='com-content' rows="3"></textarea>
                    </div>
                    <br>
                    <button type='submit' class='btn btn-outline-primary goal-button' id="save-comment-button"
                        label="{{blog.id}}">Save</button>
                </form>
            </div>
        </div>
    </div>

</div>

<script src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js'
    integrity='sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB'
    crossorigin='anonymous'></script>
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js'
    integrity='sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13'
    crossorigin='anonymous'></script>
<script src="/js/comment.js"></script>
<script src="/js/logout.js"></script>